# 操作系统 OS

[TOC]

葛季栋 gjd@nju.edu.cn   gjdnju@163.com 费楼924室

## 教师信息

### 研究兴趣

* 过程挖掘、过程建模、工作流   BPM&NLP
* 云计算环境工作流调度 移动云计算 移动边缘计算
* 文本挖掘  法条推荐 & 文书相似度量

资源的调度和分配

## 基本问题

如何使用和操作计算环境，如何利用计算资源

只要有计算就有操作系统

形而上学谓之道，形而下学谓之器

计算技术 管理学 运筹学

# chapter1

##1.1

电子数字计算机 按照已设定的程序进行数据处理的电子设备

1946年 ENIAC

## 1.2 

中央处理器 主存 外设 总线

外设： 输入 输出 存储设备 网络通信设备

存储程序计算机 冯诺依曼计算机模型

总线 Bus 内部总线 系统总线 通信总线

CPU 原运算核心 Core 控制单元 Control Unit

存储器的层次结构 容量更小 速度更快 价格更高



设备控制方式： 

* 轮询方式 CPU忙式控制 数据交换
* 中断方式 CPU 启动/中断 数据交换
* DMA 方式 CPU 启动/中断 ， DMA数据交换Direct Memory Access 直接存储器存取,是一种快速传送数据的机制

## 1.5 操作系统

OS opreating system

管理软硬件资源、控制程序执行，改善人机界面，合理组织计算机工作流程，为用户使用计算机提供良好运行环境。

组成：

* 进程调度子系统

* 进程通信子系统

* 内存管理子系统

* 设备管理子系统

* 文件管理子系统

* 网络通信子系统

* 作业控制子系统

  ​

  ​

处理器资源 内存资源 设备管理 信息资源管理 信息量资源（如何管理进程之间的通信）

屏蔽资源使用的底层细节：

向其他部分提供一个抽象、通用的接口

资源共享方式

* 独占使用方式
* 并发使用方式

资源分配策略

* 动态分配方式
* 静态分配方式
* 资源抢占方式



## 1.7 多程序同时计算

CPU速度与I/O速度不匹配的矛盾 

只有多程序同时进入内存争抢CPU运行，才可以使得CPU和外围设备充分并行，从而提高计算机系统的使用效率

feature:

1. CPU与外部设备充分并行
2. 外部设备之间充分并行
3. 发挥CPU的使用效率
4. 提高单位时间的算题量

实现：

为进入内存执行的程序建立管理实体：进程

OS应该能管理与控制进程程序的执行

OS协调管理各类资源在进程间的使用

**Pointers**

* 如何使用资源 调用操作系统提供的服务历程 （如何陷入操作系统）
* 如何复用CPU 调度程序 （在CPU空闲时让其他程序运行）
* 如何使CPU与I/O设备充分并行 设备控制器与通道（专门的I/O处理器）
* 如何让正在运行的程序让出CPU 中断 （中断正在执行的程序，引入OS处理）



操作系统的程序接口：

* 系统调用 为所有运行程序提供访问操作系统的接口

系统调用的实现机制：

* 陷入处理机制。 控制和实现系统调用的机制
* 陷入指令。
* 系统调用都事先规定了编号

入口地址表

#chapter 2

程序以进程的形式来占用处理器和系统资源

##2.1处理器状态

### 2.1.1 处理器

1. 指令系统和寄存器

取指令 译码 执行

计算机的指令集合称为指令系统

分为数据处理、转移、传送、移位、字符串及I/O等六大类

2. 特权指令 非特权指令

特权指令是指仅在内喝下才能使用的指令

非特权指令是指在目态和管态都能工作

3. 内核态和用户态
4. 状态及转换

用户态向内核态

* 程序请求操作系统服务，执行系统调用
* 在程序运行时产生中断事件，运行程序被中断，转向中断处理程序处理
* 在程序运行时产生异常事件，运行程序被打断，转向异常处理程序

内核态向用户态

* 加载陈旭状态字的特权指令 实现内核态返回用户态 将控制权转交给应用进程

### 2.1.2 程序状态字

Program Status Word,PSW 程序状态字 存放在一组特殊的寄存器里

状态标志

控制标志

系统标志

PSW是用来指示运行程序状态，控制指令执行顺序，并且保留和指示与运行程序有关的各种信息，主要作用是实现程序状态的保护和恢复。





特权指令 只有操作系统程序才能调用



处理器模式

计算机通过设置处理器模式实现特权指令管理

一般设置 0,1,2,3等四种模式

