# 操作系统听课笔记

固定分区 -》 内部碎片

可变分区 -》 外部碎片



段

记录每个分区的位置？

寄存器数量不足，放在内存中。段表。 起地址，段长。

页表

逻辑 页。物理 页框。 建立 页号到页框号的转换。

页框号，标识位。

得到了哪些页框号，以页号为索引，形成连续的排序，页表的起地址。

页表的起地址，会放在页表基址寄存器，以加快转换速度。



页表 记录分得哪些页框号

段表 记录分得哪些分段



程序局部性原理

* 时间局部性 空间局部性
* 只有少量分支 和 过程调用，顺序执行多
* 若干循环结构 少量代码 多次执行
* 过程调用的深度限制在小范围 因而 指令引用通常被局限在少量过程
* ​

虚拟存储

* 部分装入部分对换
* 可能会带来缺页中断 不利因素 局部性原理使得缺页率不会很严重。控制在适度合理的范围。

页表

页框号 

快表 TLB 存有页号页框号 



页表 只有页框号 页号是隐藏的 



OPT理论最优 不可实现 需要预知未来

FIFO

LRU

、

反置页表

**页号** 虚拟地址页号部分

磁带 顺序存取

磁盘 随机存取





磁盘 多个盘片组成，盘片两个盘面，同心圆结构的磁道，相同位置的磁道构成柱面。

每个磁道分为固定多个扇区，相邻扇区组合成簇。

物理块地址

1. 柱面号，磁头号，扇区号。
2. 0面0道1扇区 面指磁头/而不是柱面

磁盘的驱动调度

* 可能同时受到大量 i/o请求
* 驱动调度：OS的磁盘调度策略，按照最佳策略。



移臂调度及算法

* 移动臂的移动时间最小。
* 先来先服务
  * 性能不好 移臂距离大
* 最短查找时间优先
  * 先执行查找时间最短的请求，具有较好的寻道性能
  * 存在饥饿现象
* 扫描算法
  * 单向扫描
    * 总向一个方向，归途中不提供服务。
    * 适用于大量柱面均匀分布的请求的情形
  * 双向扫描
    * 移动臂每次向一个方向移动，到达最后一个柱面后再向相反方向移动。
  * 电梯调度
    * 有请求时按照电梯规律移动。

旋转调度。

* 使得旋转延迟的总时间最少。
* 循环排序
  * 通过优化i/o请求排序，在最少旋转圈内完成位于同一柱面的访问请求
  * 旋转位置的测定硬件和多磁头同时读写
* 优化分布
  * 通过信息在存储空间的排列方式来减少旋转延迟
  * 交叉因子
  * 按照柱面而非盘面进行数据读写。

优化分布。





